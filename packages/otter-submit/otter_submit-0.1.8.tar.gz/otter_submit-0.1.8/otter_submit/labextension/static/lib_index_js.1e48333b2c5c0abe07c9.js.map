{"version":3,"file":"lib_index_js.1e48333b2c5c0abe07c9.js","mappings":";;;;;;;;;;;;;;;;;AACwD;AACG;AAE3D;;GAEG;AACH,MAAM,MAAM,GAAgC;IAC1C,EAAE,EAAE,oCAAoC;IACxC,WAAW,EACT,+EAA+E;IACjF,SAAS,EAAE,IAAI;IACf,QAAQ,EAAE,CAAC,kEAAgB,CAAC;IAC5B,QAAQ,EAAE,CAAC,GAAoB,EAAE,eAAiC,EAAE,EAAE;QACpE,oBAAoB;QACpB,MAAM,EAAE,QAAQ,EAAE,GAAG,GAAG,CAAC;QACzB,MAAM,OAAO,GAAG,qBAAqB,CAAC;QACtC,IAAI,OAAa,CAAC;QAClB,eAAe,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,KAAK,EAAE,EAAE;YACxD,OAAO,GAAG,KAAK;QACjB,CAAC,CAAC;QAEF,gBAAgB;QAChB,QAAQ,CAAC,UAAU,CAAC,OAAO,EAAE;YAC3B,KAAK,EAAE,oBAAoB;YAC3B,IAAI,EAAE,qEAAc;YACpB,SAAS,EAAE,oBAAoB;YAC/B,OAAO,EAAE,iCAAiC;YAC1C,OAAO,EAAE,CAAC,IAAS,EAAE,EAAE;gBACrB,IAAI,EAAE,GAAG,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,OAAO,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;gBAEzC,IAAI,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,EAAC,IAAI,EAAE,EAAE,EAAC,CAAC,CAAC;gBACzC,IAAI,UAAU,GAAG;oBACf,OAAO,EAAE,EAAC,cAAc,EAAE,kBAAkB,EAAC;oBAC7C,IAAI,EAAE,OAAO;oBACb,MAAM,EAAE,MAAM;iBACf,CAAC;gBAEF,KAAK,CAAC,wBAAwB,EAAE,UAAU,CAAC;oBACzC,mDAAmD;qBAClD,IAAI,CAAC,QAAQ,GAAE,GAAC,OAAO,QAAQ,CAAC,IAAI,EAAE,GAAC,CAAC;oBACzC,wFAAwF;qBACvF,IAAI,CAAC,IAAI,GAAE;oBACV,IAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,EAAC;wBAC1B,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC;wBAClB,MAAM,CAAC,IAAI,CAAC,wBAAwB,EAAE,QAAQ,EAAE,6DAA6D,CAAC;qBAC/G;;wBACC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC;gBACrB,CAAC,CACA,CAAC;YAEN,CAAC;SACF,CAAC,CAAC;IACL,CAAC;CACF,CAAC;AAGF;;GAEG;AACH,iEAAe,MAAM,EAAC","sources":["webpack://@otter-submit/submit-button/./src/index.ts"],"sourcesContent":["import { JupyterFrontEndPlugin, JupyterFrontEnd } from '@jupyterlab/application';\nimport { INotebookTracker } from '@jupyterlab/notebook';\nimport { fileUploadIcon } from '@jupyterlab/ui-components';\n\n/**\n * The plugin registration information.\n */\nconst plugin: JupyterFrontEndPlugin<void> = {\n  id: '@otter-submit/submit-button:plugin',\n  description:\n    'A JupyterLab extension used to submit notebooks for grading to otter-service.',\n  autoStart: true,\n  requires: [INotebookTracker],\n  activate: (app: JupyterFrontEnd, notebookTracker: INotebookTracker) => {\n    // Nothing is needed\n    const { commands } = app;\n    const command = 'otter-submit:submit';\n    var nbpanel : any;\n    notebookTracker.currentChanged.connect((tracker, panel) => {\n      nbpanel = panel\n    })\n\n    // Add a command\n    commands.addCommand(command, {\n      label: \"Submit for Grading\",\n      icon: fileUploadIcon,\n      iconLabel: \"Submit for Grading\",\n      caption: 'Send your notebook to be graded',\n      execute: (args: any) => {\n        var nb = nbpanel?.context.model.toJSON();\n\n        var payload = JSON.stringify({'nb': nb});\n        var otherParam = {\n          headers: {\"Content-Type\": \"application/json\"},\n          body: payload,\n          method: \"POST\"\n        };\n\n        fetch('/services/otter_grade/', otherParam)\n          // processes the response (in this case grabs text)\n          .then(response=>{return response.text()})\n          // processes the output of previous line (calling it data, then doing something with it)\n          .then(data=>{\n            if(data.indexOf(\"403\") > -1){\n              console.log(\"403\")\n              window.open('/services/otter_grade/', '_blank', 'location=yes,height=570,width=520,scrollbars=yes,status=yes')\n            }else\n              console.log(data)\n          }\n          );\n\n      }\n    });\n  }\n};\n\n\n/**\n * Export the plugin as default.\n */\nexport default plugin;\n"],"names":[],"sourceRoot":""}