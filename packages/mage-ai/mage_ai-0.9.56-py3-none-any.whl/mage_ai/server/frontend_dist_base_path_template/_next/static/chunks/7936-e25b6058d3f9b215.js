"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7936],{46978:function(e,n,t){t.d(n,{Cl:function(){return u},Nk:function(){return c},ZG:function(){return l}});var o=t(38626),r=t(44897),i=t(70515),l=1.5*i.iI,u=1*l+i.iI/2,c=o.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-uvd91-0"})([".row:hover{","}"],(function(e){return"\n      background-color: ".concat((e.theme.interactive||r.Z.interactive).hoverBackground,";\n    ")}))},97936:function(e,n,t){t.d(n,{Z:function(){return Fe}});var o,r,i=t(82394),l=t(75582),u=t(82684),c=t(38626),d=t(69864),a=t(44425),s=t(70374),f=t(78050),v=t(39867),p=t(89706),h=t(97618),m=t(30160),b=t(32929),g=t(72473),j="CUSTOM_EVENT_NAME_FOLDER_EXPAND",C=(o={},(0,i.Z)(o,p.Lu.CSV,g.iA),(0,i.Z)(o,p.Lu.JSON,g.EK),(0,i.Z)(o,p.Lu.MD,g.$B),(0,i.Z)(o,p.Lu.PY,g.Bf),(0,i.Z)(o,p.Lu.R,g.u$),(0,i.Z)(o,p.Lu.SH,g.oI),(0,i.Z)(o,p.Lu.SQL,g.vo),(0,i.Z)(o,p.Lu.TXT,g.KJ),(0,i.Z)(o,p.Lu.YAML,g.aV),(0,i.Z)(o,p.Lu.YML,g.aV),o),y=(r={},(0,i.Z)(r,p.Lu.CSV,"#C7CDDA"),(0,i.Z)(r,p.Lu.JSON,"#6B50D7"),(0,i.Z)(r,p.Lu.MD,"#9B6CA7"),(0,i.Z)(r,p.Lu.PY,"#FFE873"),(0,i.Z)(r,p.Lu.R,"#FF144D"),(0,i.Z)(r,p.Lu.SH,"#CBFE00"),(0,i.Z)(r,p.Lu.SQL,"#00758F"),(0,i.Z)(r,p.Lu.TXT,"#C7CDDA"),(0,i.Z)(r,p.Lu.YAML,"#95ECE2"),(0,i.Z)(r,p.Lu.YML,"#95ECE2"),r),w=t(46978),k=t(70515),x=t(85385),Z=t(53808),E=t(55283),D=t(53005),F=t(86735),O=t(81728),_=t(28598);function P(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function L(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?P(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var I="default_repo",S=c.default.div.withConfig({displayName:"Folder__ChildrenStyle",componentId:"sc-jv4kg5-0"})([".expanded_children{display:block;}.collapsed_children{display:none;}"]),R=c.default.div.withConfig({displayName:"Folder__ChevronStyle",componentId:"sc-jv4kg5-1"})([".expanded{.down{display:block;position:relative;}.right{display:none;position:absolute;}}.collapsed{.down{display:none;position:absolute;}.right{display:block;position:relative;}}"]);function T(e){var n=e.children,t=e.idleTimeout,o=(0,u.useState)(!1),r=o[0],i=o[1];return(0,u.useEffect)((function(){r&&i(!1);var e=requestIdleCallback((function(){return i(!0)}),{timeout:t});return function(){return cancelIdleCallback(e)}}),[t]),r?n:null}var N=function e(n){var t=n.allowEmptyFolders,o=n.allowSelectingFolders,r=n.containerRef,l=n.disableContextMenu,c=n.file,d=n.isFileDisabled,s=n.isInPipelinesFolder,P=n.isNotFolder,N=n.level,M=n.onClickFile,A=n.onClickFolder,B=n.onSelectBlockFile,U=n.onlyShowChildren,Y=n.openFile,Q=n.openSidekickView,V=n.reloadCount,z=n.renderAfterContent,G=n.selectFile,$=n.setContextItem,q=n.setCoordinates,H=n.setDraggingFile,W=n.setSelectedFile,X=n.theme,K=n.timeout,J=n.useRootFolder,ee=n.uuidCombined,ne=c.children,te=c.disabled,oe=c.name,re=c.parent,ie=(0,u.useMemo)((function(){return ne?(0,F.YC)(ne,(function(e){return e.children?0:1})):ne}),[ne]),le=(0,u.useMemo)((function(){return[].concat(ee||[]).concat(oe||I)}),[oe,ee,,]),ue=(0,u.useMemo)((function(){return null===le||void 0===le?void 0:le.join("/")}),[le]),ce=(0,Z.U2)(Z.lQ,{}),de=(0,u.useRef)(null),ae=(0,u.useRef)(null),se=(0,u.useRef)(ue in ce?ce[ue]:0===N),fe=(0,u.useRef)(0),ve=se.current;oe||t||(c.name=I);var pe=J?(0,D.a9)(c):(0,D.jN)(c),he=(0,u.useMemo)((function(){return!!ie&&!P}),[ie,P]),me=(0,u.useMemo)((function(){var e;return null===le||void 0===le||null===(e=le.find)||void 0===e?void 0:e.call(le,(function(e){return(0,O.C5)(e)in a.GJ}))}),[le]),be=(0,u.useMemo)((function(){return me?(0,O.C5)(me):null}),[me]),ge=(0,u.useMemo)((function(){return he&&me&&me===oe}),[me,he,oe]),je=(0,u.useMemo)((function(){return me&&!he&&(0,D.y)(oe)&&(0,D.o$)(oe,be)}),[be,me,he,oe]),Ce=(0,u.useMemo)((function(){return me?(0,E.qn)(be,{theme:X}).accent:null}),[be,me]),ye=oe===p.oy,we=(0,u.useMemo)((function(){return d?d(pe,ie):te||s&&"__init__.py"===oe||me&&"__init__.py"===oe}),[ie,te,,pe,me,d,s,oe]),ke=(0,u.useMemo)((function(){var e,n=g.iU;if(!he&&P)n=g.mH;else if(ye)n=g.vd;else if(oe===p.PF)n=g.GQ;else if(he)n=ge&&(null===b.iK||void 0===b.iK?void 0:b.iK[be])||g.Bu;else if(!oe&&t)n=g.mH;else if(s&&!he&&"metadata.yaml"===oe)n=g.B_;else if(null!==oe&&void 0!==oe&&oe.includes(".log"))n=g.UL;else if(!he){var o=(0,D.mD)(oe);o&&o in C&&(n=C[o],e=y[o])}return{IconEl:n,fileIconColor:e}}),[t,be,ge,he,s,P,N,oe]),xe=ke.IconEl,Ze=ke.fileIconColor,Ee=(0,u.useMemo)((function(){var e=v.Z;return a.tf.CHART===be&&(e=g.GQ),e}),[be]),De=(0,u.useCallback)((function(n){return null===n||void 0===n?void 0:n.map((function(n){return(0,_.jsx)(e,{allowEmptyFolders:t,allowSelectingFolders:o,containerRef:r,disableContextMenu:l,file:L(L({},n),{},{parent:c}),isFileDisabled:d,isNotFolder:null===n||void 0===n?void 0:n.isNotFolder,isInPipelinesFolder:s||ye,level:U?N:N+1,onClickFile:M,onClickFolder:A,onSelectBlockFile:B,openFile:Y,openSidekickView:Q,reloadCount:V,renderAfterContent:z,selectFile:G,setContextItem:$,setCoordinates:q,setDraggingFile:H,setSelectedFile:W,theme:X,timeout:K,useRootFolder:J,uuidCombined:le},"".concat(ue,"/").concat((null===n||void 0===n?void 0:n.name)||I,"-").concat(V))}))}),[t,o,ie,l,c,d,s,ye,N,M,A,B,U,Y,Q,V,z,G,$,q,H,W,J,ue,le]),Fe=(0,u.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(se.current="undefined"===typeof e||null===e?!se.current:e,de.current.className=se.current?"expanded_children":"collapsed_children",ae.current.className=se.current?"expanded":"collapsed",0===fe.current){var t=document.getElementById(de.current.id),o=(0,f.createRoot)(t);o.render((null===ie||void 0===ie?void 0:ie.length)>=1?(0,_.jsx)(T,{idleTimeout:n||1,children:De(ie)}):he?De(Oe):(0,_.jsx)("div",{}))}(0,Z.rQ)(Z.lQ,(0,i.Z)({},ue,se.current)),fe.current+=1}),[ie,he,ue]);(0,u.useEffect)((function(){var e=function(e){var n=e.detail,t=n.expand,o=(n.file,n.folder);he&&o&&null!==ue&&void 0!==ue&&ue.startsWith(null===o||void 0===o?void 0:o.uuid)&&((0,Z.rQ)(Z.lQ,(0,i.Z)({},ue,t)),Fe(t,100*N))};return window.addEventListener(j,e),function(){window.removeEventListener(j,e)}}),[he,N,Fe,ue]);var Oe=(0,u.useMemo)((function(){return[{disabled:!0,name:"Empty",parent:c,isNotFolder:!0,uuid:le}]}),[c,le]),_e=(0,u.useMemo)((function(){var e=[];return(0,F.w6)(N).forEach((function(n,t){var o,r=w.Cl-1;e.push((0,_.jsx)("div",{style:{borderLeft:"1px solid ".concat(null===X||void 0===X||null===(o=X.content)||void 0===o?void 0:o.disabled),height:22,marginLeft:r/2-2,paddingLeft:r/2+2}},"line-".concat(ue,"-").concat(t)))})),e}),[N,X,ue]);return(0,u.useEffect)((function(){setTimeout((function(){var e;if(ve&&0===(null===fe||void 0===fe?void 0:fe.current)&&null!==de&&void 0!==de&&null!==(e=de.current)&&void 0!==e&&e.id){var n;fe.current=1;var t=document.getElementById(null===de||void 0===de||null===(n=de.current)||void 0===n?void 0:n.id);try{(0,f.createRoot)(t).render((null===ie||void 0===ie?void 0:ie.length)>=1?(0,_.jsx)(T,{idleTimeout:100*N,children:De(ie)}):null!==ie&&void 0!==ie&&ie.length?null:he?De(Oe):(0,_.jsx)("div",{}))}catch(o){console.log(o)}}}),1)}),[]),(0,_.jsxs)(_.Fragment,{children:[!U&&(0,_.jsxs)("div",{className:"row",onClick:function(e){if(e.preventDefault(),!we){if((null===re||void 0===re?void 0:re.name)===p.PF){null===Q||void 0===Q||Q(x.cH.CHARTS);var n=(0,D.lr)(c);n&&(null===B||void 0===B||B(n.uuid,n.type,(0,D.jN)(c)))}var t=(0,D.V3)(c);if(ie)o?G(pe):Fe(),null===A||void 0===A||A(pe);else if(M)M(pe);else if(t)null===B||void 0===B||B(t.uuid,t.type,(0,D.jN)(c),{file:c,path:pe});else if(oe.match(p.xF))null===Y||void 0===Y||Y(pe);else{var r=(0,D.lr)(c);r&&(null===B||void 0===B||B(r.uuid,r.type,(0,D.jN)(c)))}}},onContextMenu:function(e){var n;clearTimeout(K.current),null!==r&&void 0!==r&&null!==(n=r.current)&&void 0!==n&&n.contains(e.target)&&!l&&(e.preventDefault(),q({x:e.pageX,y:e.pageY}),H(null),W(L(L({},c),{},{uuid:ue})))},onMouseDown:function(e){var n,t=c?(0,D.lr)(c,null,!0):null;null===r||void 0===r||null===(n=r.current)||void 0===n||!n.contains(e.target)||!t||(null===ie||void 0===ie?void 0:ie.length)>=1||l||we||s||(e.preventDefault(),clearTimeout(K.current),K.current=setTimeout((function(){q({x:e.pageX,y:e.pageY}),H(c),W(null)}),300))},style:{alignItems:"center",cursor:"default",display:"flex",minWidth:N*w.Cl+c.name.length*k.Fo+2*k.iI,paddingRight:k.iI/4},children:[(0,_.jsxs)(h.Z,{alignItems:"center",flex:1,children:[_e,(0,_.jsxs)(R,{children:[ie&&(0,_.jsxs)("div",{className:ve?"expanded":"collapsed",ref:ae,children:[(0,_.jsx)("div",{className:"down",children:(0,_.jsx)(g._M,{muted:!0,size:w.ZG})}),(0,_.jsx)("div",{className:"right",children:(0,_.jsx)(g._Q,{muted:!0,size:w.ZG})})]}),!ie&&(0,_.jsx)("div",{style:{width:w.ZG}})]}),(0,_.jsx)("div",{style:{marginLeft:k.iI/2,marginRight:k.iI/2},children:me&&!he&&je?(0,_.jsx)(Ee,{color:Ce,size:me&&!he?.7*w.ZG:w.ZG,square:!0}):(0,_.jsx)(xe,{fill:Ze||(ge?Ce:null),disabled:we,size:w.ZG})}),(0,_.jsx)(m.ZP,{default:!we,disabled:we,monospace:!0,small:!0,children:oe})]}),z&&z(c)]}),(0,_.jsx)(S,{children:(0,_.jsx)("div",{className:ve?"expanded_children":"collapsed_children",id:ue,ref:de})})]})},M=t(65186),A=t(71180),B=t(55485),U=t(93369),Y=t(65956),Q=t(38276),V=t(17488),z=t(35686),G=t(42122),$=t(72619);var q=function(e){var n=e.fetchFileTree,t=e.file,o=e.moveFile,r=e.onCancel,i=e.onCreateFile,c=e.selectedFolder,a=e.setErrors,s=(0,u.useRef)(null),f=(0,G.Qr)(t)?null:t,v=(0,u.useState)(f?(0,D.jN)(f,null,!0):""),p=v[0],h=v[1],m=(0,u.useState)(f?null===f||void 0===f?void 0:f.name:""),b=m[0],g=m[1];(0,u.useEffect)((function(){var e;null===s||void 0===s||null===(e=s.current)||void 0===e||e.focus()}),[]),(0,u.useEffect)((function(){c&&h((0,D.eV)(null===c||void 0===c?void 0:c.uuid))}),[c]);var j=(0,d.Db)(z.ZP.files.useCreate(),{onSuccess:function(e){return(0,$.wD)(e,{callback:function(e){var t=e.file;null===n||void 0===n||n(),r(),null===i||void 0===i||i(t)},onErrorCallback:function(e,n){return a({errors:n,response:e})}})}}),C=(0,l.Z)(j,1)[0],y=(0,d.Db)(z.ZP.files.useUpdate(f&&encodeURIComponent((0,D.jN)(f))),{onSuccess:function(e){return(0,$.wD)(e,{callback:function(){null===n||void 0===n||n(),r()},onErrorCallback:function(e,n){return a({errors:n,response:e})}})}}),w=(0,l.Z)(y,1)[0];return(0,_.jsxs)(Y.Z,{footer:(0,_.jsxs)(B.ZP,{children:[(0,_.jsxs)(U.ZP,{bold:!0,disabled:!b,inline:!0,onClick:function(){return f?w({file:{dir_path:p,name:b},file_json_only:!0}):C({file:{dir_path:p,name:b,overwrite:!1},file_json_only:!0})},primary:!0,tabIndex:0,uuid:"NewFile/create_file",children:[f?o?"Move":"Rename":"Create"," file"]}),(0,_.jsx)(Q.Z,{ml:1,children:(0,_.jsx)(A.ZP,{onClick:function(){return r()},tabIndex:0,children:"Cancel"})})]}),headerTitle:f?o?"Move file":"Rename file":"New file",minWidth:50*k.iI,children:[(0,_.jsx)(V.Z,{disabled:!!f&&!o,label:"Directory",monospace:!0,onChange:function(e){return h(e.target.value)},setContentOnMount:!0,value:p}),(0,_.jsx)(Q.Z,{mt:2,children:(0,_.jsx)(V.Z,{disabled:!!o,label:"Filename",monospace:!0,onChange:function(e){return g(e.target.value)},ref:s,required:!0,value:b})})]})},H=t(82359);var W=function(e){var n=e.fetchFileTree,t=e.file,o=e.moveFile,r=e.onCancel,i=e.onCreateFile,c=e.projectType,a=e.selectedFolder,s=e.setErrors,f=e.showError,v=(0,u.useRef)(null),p=(0,G.Qr)(t)?null:t,h=(0,u.useState)(p?(0,D.jN)(p,null,!0):""),m=h[0],b=h[1],g=(0,u.useState)(p?null===p||void 0===p?void 0:p.name:""),j=g[0],C=g[1];(0,u.useEffect)((function(){var e;null===v||void 0===v||null===(e=v.current)||void 0===e||e.focus()}),[]),(0,u.useEffect)((function(){a&&b((0,D.eV)(null===a||void 0===a?void 0:a.uuid))}),[a]);var y=(0,d.Db)(z.ZP.folders.useCreate(),{onSuccess:function(e){return(0,$.wD)(e,{callback:function(e){var t=e.file;null===n||void 0===n||n(),r(),null===i||void 0===i||i(t)},onErrorCallback:function(e,n){return s?s({errors:n,response:e}):f({errors:n,response:e})}})}}),w=(0,l.Z)(y,1)[0],x=(0,d.Db)(z.ZP.folders.useUpdate(p&&encodeURIComponent((0,D.jN)(p))),{onSuccess:function(e){return(0,$.wD)(e,{callback:function(){null===n||void 0===n||n(),r()},onErrorCallback:function(e,n){return s?s({errors:n,response:e}):f({errors:n,response:e})}})}}),Z=(0,l.Z)(x,1)[0],E=(0,d.Db)(z.ZP.projects.useCreate(),{onSuccess:function(e){return(0,$.wD)(e,{callback:function(){null===n||void 0===n||n(),r()},onErrorCallback:function(e,n){return s?s({errors:n,response:e}):f({errors:n,response:e})}})}}),F=(0,l.Z)(E,2),O=F[0],P=F[1].isLoading;return(0,_.jsxs)(Y.Z,{footer:(0,_.jsxs)(B.ZP,{children:[(0,_.jsxs)(U.ZP,{bold:!0,disabled:!j,inline:!0,loading:P,onClick:function(){return p?Z({folder:{name:j,path:m}}):c?O({project:{repo_path:m,type:c,uuid:j}}):w({folder:{name:j,overwrite:!1,path:m}})},primary:!0,tabIndex:0,uuid:"NewFolder/create_folder",children:[c&&"Create project",!c&&(0,_.jsxs)(_.Fragment,{children:[p?o?"Move":"Rename":"Create"," folder"]})]}),(0,_.jsx)(Q.Z,{ml:1,children:(0,_.jsx)(A.ZP,{onClick:function(){return r()},tabIndex:0,children:"Cancel"})})]}),headerTitle:p?o?"Move folder":"Rename folder":c?H.k.STANDALONE===c?"New Mage project":H.k.DBT===c?"New dbt project":"New project":"New folder",minWidth:50*k.iI,children:[(0,_.jsx)(V.Z,{disabled:!!p&&!o,label:c?"Project directory":"Directory",monospace:!0,onChange:function(e){return b(e.target.value)},setContentOnMount:!0,value:m}),(0,_.jsx)(Q.Z,{mt:2,children:(0,_.jsx)(V.Z,{disabled:!!o,label:c?"Project name":"Folder name",monospace:!0,onChange:function(e){return C(e.target.value)},ref:v,required:!0,value:j})})]})},X=t(57653),K=t(89515),J=t(17717),ee=t(77011);function ne(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function te(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ne(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ne(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var oe=c.default.div.withConfig({displayName:"MultiFileInput__DropzoneStyle",componentId:"sc-1l6yd2y-0"})(["&:hover{cursor:pointer;}"]);var re=function(e){var n=e.children,t=e.inputOnChange,o=e.inputProps,r=e.onDragActiveChange,i=e.setFiles,l=(0,u.useCallback)((function(e){i(e)}),[i]),c=(0,ee.uI)({onDrop:l}),d=c.getInputProps,a=c.getRootProps,s=c.isDragActive,f=d(),v=f.accept,p=f.autoComplete,h=f.multiple,m=f.onChange,b=f.onClick,g=f.ref,j=f.style,C=f.tabIndex,y=f.type,w=te(te({},o),{},{accept:v,autoComplete:p,multiple:h,onChange:function(e){null===t||void 0===t||t(e),null===o||void 0===o||o.onChange(e),m(e)},onClick:b,ref:g,style:j,tabIndex:C,type:y});return(0,u.useEffect)((function(){null===r||void 0===r||r(s)}),[s,r]),(0,_.jsxs)(oe,te(te({},a()),{},{children:[(0,_.jsx)("input",te(te({},w),{},{directory:"",webkitdirectory:""})),n]}))};function ie(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function le(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ie(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ie(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ue=function(e){var n=e.children,t=e.directoryPath,o=e.onDragActiveChange,r=e.setFileUploadProgress,c=e.setUploadedFiles,a=(0,d.Db)(z.ZP.files.useCreate({onUploadProgress:function(e,n){var t,o=n.body,l=[null===o||void 0===o?void 0:o.dir_path,null===o||void 0===o||null===(t=o.file)||void 0===t?void 0:t.name].filter((function(e){return(null===e||void 0===e?void 0:e.length)>=1})).join(J.sep);null===r||void 0===r||r((function(n){return le(le({},n),{},(0,i.Z)({},l,e.loaded/e.total))}))}})),s=(0,l.Z)(a,1)[0],f=(0,u.useCallback)((function(e){e.forEach((function(e){var n=e.name,o=e.path,l=[t],u=o.split(J.sep).filter((function(e){return e&&e!==n})).join(J.sep);u&&l.push(u);var d=[],a=l.join(J.sep);(null===a||void 0===a?void 0:a.length)>=1&&l.push(a),d.push(n);var f=d.join(J.sep);s({dir_path:a,file:e,overwrite:!1}).then((function(e){var n=e.data,t=n.error,o=n.file;c((function(e){return le(le({},e),{},(0,i.Z)({},f,o||t))}))})),r((function(e){return le(le({},e),{},(0,i.Z)({},f,0))}))}))}),[s,t,r,c]);return(0,_.jsx)(re,{onDragActiveChange:o,setFiles:f,children:n})},ce=t(35185),de=t(75499),ae=t(44897),se=t(42631),fe=(k.iI,c.default.div.withConfig({displayName:"indexstyle__DropZoneStyle",componentId:"sc-1g3zz7z-0"})(["border-radius:","px;padding:","px;max-width:","px;min-width:","px;",""],se.n_,8*k.iI,100*k.iI,55*k.iI,(function(e){return"\n    border: 1px dashed ".concat((e.theme.borders||ae.Z.borders).contrast,";\n  ")}))),ve=c.default.div.withConfig({displayName:"indexstyle__TableStyle",componentId:"sc-1g3zz7z-1"})(["max-width:","px;min-width:","px;"],100*k.iI,55*k.iI);var pe=function(e){var n=e.fetchFileTree,t=e.onCancel,o=e.selectedFolder,r=(0,u.useState)(!1),i=r[0],c=r[1],d=(0,u.useState)({}),a=d[0],s=d[1],f=(0,u.useState)({}),v=f[0],p=f[1],h=!(0,G.Qr)(a),b=(0,u.useMemo)((function(){var e=[];return(0,F.YC)(Object.entries(a),(function(e){var n=(0,l.Z)(e,2),t=n[0];n[1];return t})).forEach((function(n){var t=(0,l.Z)(n,2),o=t[0],r=t[1],i=v[o],u=null===i||void 0===i?void 0:i.message;e.push([(0,_.jsxs)("div",{children:[(0,_.jsx)(m.ZP,{overflowWrap:!0,preWrap:!0,children:o}),u&&(0,_.jsx)(Q.Z,{mt:1,children:(0,_.jsx)(m.ZP,{danger:!0,small:!0,children:u})})]},"name-".concat(o)),(0,_.jsx)(ce.Z,{danger:!!u,progress:100*r},"progress-".concat(o))])})),(0,_.jsx)(de.Z,{columnFlex:[1,4],columns:[{uuid:"Filename"},{uuid:"Upload progress"}],rows:e,uuid:"block-runs"})}),[a,v]);return(0,_.jsxs)(Y.Z,{footer:(0,_.jsxs)(B.ZP,{fullWidth:!0,children:[(0,_.jsx)(A.ZP,{onClick:function(){return t()},children:"Close"}),h&&(0,_.jsx)(Q.Z,{ml:1,children:(0,_.jsx)(A.ZP,{onClick:function(){s({}),p({})},children:"Clear files and retry"})})]}),headerTitle:"Upload files",children:[h&&(0,_.jsx)(ve,{children:b}),!h&&(0,_.jsx)(ue,{directoryPath:o?(0,D.jN)(o):"",onDragActiveChange:c,setFileUploadProgress:s,setUploadedFiles:function(e){p(e),null===n||void 0===n||n()},children:(0,_.jsx)(fe,{children:(0,_.jsxs)(m.ZP,{center:!0,children:[i&&"Drop to upload",!i&&"Click or drop files and folders to upload"]})})})]})},he=t(77417),me=t(19698),be=t(31353),ge=t(80330),je=t(85202),Ce=t(44952),ye=t(23780),we=t(89538);function ke(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function xe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ke(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ke(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ze,Ee=20*k.iI;function De(e,n){var t=e.addNewBlock,o=(e.blocks,e.deleteWidget),r=(e.fetchAutocompleteItems,e.fetchFileTree),i=e.fetchPipeline,f=e.files,v=e.onClickFile,p=e.onClickFolder,h=e.onSelectBlockFile,b=e.openFile,C=(e.openSidekickView,e.pipeline),y=e.setErrors,x=e.setSelectedBlock,Z=(e.widgets,(0,u.useRef)(null)),E=(0,u.useContext)(c.ThemeContext),O=(0,u.useState)(null),P=O[0],L=O[1],I=(0,u.useState)(null),S=I[0],R=I[1],T=(0,u.useState)(null),A=T[0],B=T[1],U=(0,u.useState)(0),Y=U[0],Q=U[1];(0,u.useEffect)((function(){Q((function(e){return e+1}))}),[f]);var V=(0,u.useMemo)((function(){return A&&"undefined"!==typeof(null===A||void 0===A?void 0:A.children)&&A}),[A]),G=(0,ye.VI)(null,{},[],{uuid:"FileBrowser"}),J=(0,l.Z)(G,1)[0],ee=(0,he.Z)(),ne=ee.featureEnabled,te=ee.featureUUIDs,oe=ee.project,re=(0,me.Z)().status,ie=(0,d.Db)((function(e){return z.ZP.downloads.files.useCreate(e)()}),{onSuccess:function(e){return(0,$.wD)(e,{callback:function(){var n=e.data.download.token;(0,Ce.K)(n)},onErrorCallback:function(e,n){return y?y({errors:n,response:e}):J({errors:n,response:e})}})}}),le=(0,l.Z)(ie,1)[0],ue=(0,d.Db)((function(e){return z.ZP.files.useDelete(e)()}),{onSuccess:function(e){return(0,$.wD)(e,{callback:function(){null===r||void 0===r||r()},onErrorCallback:function(e,n){return y?y({errors:n,response:e}):J({errors:n,response:e})}})}}),ce=(0,l.Z)(ue,1)[0],de=(0,d.Db)((function(e){return z.ZP.folders.useDelete(e)()}),{onSuccess:function(e){return(0,$.wD)(e,{callback:function(){null===r||void 0===r||r()},onErrorCallback:function(e,n){return y?y({errors:n,response:e}):J({errors:n,response:e})}})}}),ae=(0,l.Z)(de,1)[0],se=(0,d.Db)((function(e){var n=e.block,t=(n.language,n.type,n.uuid),o=e.file,r=e.force,i=void 0!==r&&r;return z.ZP.blocks.useDelete(encodeURIComponent(t),{file_path:o?encodeURIComponent((0,D.jN)(o)):null,force:i})()}),{onSuccess:function(e){return(0,$.wD)(e,{callback:function(){null===r||void 0===r||r()},onErrorCallback:function(e){var n=e.error,t=n.exception;n.message.includes("raise HasDownstreamDependencies")&&Ze({block:Ie,file:A,exception:t})}})}}),fe=(0,l.Z)(se,1)[0],ve=(0,we.dd)((function(e){var n=e.block,t=e.file;return(0,_.jsx)(K.Z,{centerOnScreen:!0,danger:!0,onCancel:De,onClick:function(){return fe({block:n,file:t,force:!0}).then((function(){return De()}))},subtitle:"Deleting this block file is dangerous. This block may have dependencies in active pipelines. Press confirm to delete this block anyway and remove it as a dependency from downstream blocks.",title:"Delete ".concat(n.uuid," anyway?"),width:34*k.iI})})),ke=(0,l.Z)(ve,2),Ze=ke[0],De=ke[1],Fe=(0,F.sE)(null===C||void 0===C?void 0:C.blocks,(function(e){var n=e.type;return a.tf.DATA_EXPORTER===n})),Oe=(0,d.Db)(z.ZP.blocks.pipelines.useUpdate(encodeURIComponent(null===C||void 0===C?void 0:C.uuid),encodeURIComponent(null===Fe||void 0===Fe?void 0:Fe.uuid)),{onSuccess:function(e){return(0,$.wD)(e,{callback:function(){null===i||void 0===i||i()},onErrorCallback:function(e,n){return y?y({errors:n,response:e}):J({errors:n,response:e})}})}}),_e=(0,l.Z)(Oe,1)[0],Pe=(0,u.useCallback)((function(){return B(null)}),[B]);(0,u.useEffect)((function(){var e,o,r,i=function(e){if(clearTimeout(Z.current),R(null),S&&C&&t){var o,r,i=(null===n||void 0===n||null===(o=n.current)||void 0===o||null===(r=o.getBoundingClientRect)||void 0===r?void 0:r.call(o))||{},l=i.width,u=i.x;if(e.pageX>u+l){var c=(null===C||void 0===C?void 0:C.type)===X.qL.INTEGRATION,d=(0,ge.TU)(xe(xe({},S),{},{path:(0,D.jN)(S)}),re.repo_path,C);null===t||void 0===t||t(xe(xe({},d),{},{require_unique_name:!1}),(function(e){c&&Fe&&_e({block:xe(xe({},Fe),{},{upstream_blocks:[e.uuid]})}),null===x||void 0===x||x(e)}),{disableFetchingFiles:!0})}}},l=function(e){S&&L({x:e.pageX,y:e.pageY})};return null===(e=document)||void 0===e||e.addEventListener("click",Pe),null===(o=document)||void 0===o||o.addEventListener("mousemove",l),null===(r=document)||void 0===r||r.addEventListener("mouseup",i),function(){var e,n,t;null===(e=document)||void 0===e||e.removeEventListener("click",Pe),null===(n=document)||void 0===n||n.removeEventListener("mousemove",l),null===(t=document)||void 0===t||t.removeEventListener("mouseup",i)}}),[t,Fe,S,Pe,C,n,x,re,Z,_e]);var Le=(0,u.useMemo)((function(){return null===f||void 0===f?void 0:f.map((function(e){return(0,_.jsx)(N,{containerRef:n,file:e,level:0,onClickFile:v,onClickFolder:p,onSelectBlockFile:h,openFile:b,reloadCount:Y,setCoordinates:L,setDraggingFile:R,setSelectedFile:B,theme:E,timeout:Z},"".concat(e.name,"-").concat(Y))}))}),[f,v,p,b,h,Y]),Ie=(0,u.useMemo)((function(){return A&&(0,D.lr)(A)}),[A]),Se=(0,u.useMemo)((function(){return S&&(0,D.lr)(S)}),[S]),Re=(0,we.dd)((function(){return(0,_.jsx)(pe,{fetchFileTree:r,onCancel:Me,selectedFolder:V})}),{},[r,V],{background:!0,uuid:"upload_files"}),Te=(0,l.Z)(Re,2),Ne=Te[0],Me=Te[1],Ae=(0,we.dd)((function(e){return(0,_.jsx)(q,{fetchFileTree:r,file:null===e||void 0===e?void 0:e.file,moveFile:null===e||void 0===e?void 0:e.moveFile,onCancel:Ye,selectedFolder:V,setErrors:y})}),{},[r,V,y],{background:!0,disableClickOutside:!0,uuid:"new_file"}),Be=(0,l.Z)(Ae,2),Ue=Be[0],Ye=Be[1],Qe=(0,we.dd)((function(e){return(0,_.jsx)(W,{fetchFileTree:r,file:null===e||void 0===e?void 0:e.file,moveFile:null===e||void 0===e?void 0:e.moveFile,onCancel:Ge,projectType:null===e||void 0===e?void 0:e.projectType,selectedFolder:V,setErrors:y,showError:J})}),{},[r,V,y,J],{background:!0,disableClickOutside:!0,uuid:"new_folder"}),Ve=(0,l.Z)(Qe,2),ze=Ve[0],Ge=Ve[1],$e=(0,u.useMemo)((function(){var e;if(!Ie&&!A&&!V)return(0,_.jsx)("div",{});var t=(null===n||void 0===n||null===(e=n.current)||void 0===e?void 0:e.getBoundingClientRect())||{},r=t.x,i=t.width,l=P||{},u=l.x,c=void 0===u?0:u,d=l.y,f=void 0===d?0:d,v=c+k.iI;c+Ee>=r+i&&(v=r+i-(Ee+k.iI)),v<0&&(v=0);var p=[];V?(p.push.apply(p,[{label:function(){return"New folder"},onClick:function(){ze()},uuid:"new_folder"},{label:function(){return"Rename folder"},onClick:function(){ze({file:V})},uuid:"rename_folder"},{label:function(){return"Move folder"},onClick:function(){ze({file:V,moveFile:!0})},uuid:"Move_folder"},{label:function(){return"Delete folder"},onClick:function(){var e=(0,D.jN)(V);window.confirm("Are you sure you want to delete folder ".concat(e," and all its subfolders and files?"))&&ae(encodeURIComponent(e))},uuid:"Delete_folder"},{label:function(){return"New file"},onClick:function(){Ue({file:{}})},uuid:"new_file"},{label:function(){return"Upload files"},onClick:function(){Ne()},uuid:"upload_files"},{label:function(){return"Expand all subfolders"},onClick:function(){var e=new CustomEvent(j,{detail:{expand:!0,file:A,folder:V}});window.dispatchEvent(e)},uuid:"Expand all subfolders"},{label:function(){return"Collapse all subfolders"},onClick:function(){var e=new CustomEvent(j,{detail:{expand:!1,file:A,folder:V}});window.dispatchEvent(e)},uuid:"Collapse all subfolders"}]),null!==ne&&void 0!==ne&&ne(null===te||void 0===te?void 0:te.PROJECT_PLATFORM)&&p.push({beforeIcon:(0,_.jsx)(M.Z,{width:1.5*k.iI}),onClick:function(){ze({projectType:H.k.STANDALONE})},uuid:"New Mage project"}),null!==ne&&void 0!==ne&&ne(null===te||void 0===te?void 0:te.DBT_V2)&&p.push({beforeIcon:(0,_.jsx)(g.xE,{}),onClick:function(){ze({projectType:H.k.DBT})},uuid:"New dbt project"})):A&&(p.push.apply(p,[{label:function(){return"Rename file"},onClick:function(){Ue({file:A})},uuid:"rename_file"},{label:function(){return"Move file"},onClick:function(){Ue({file:A,moveFile:!0})},uuid:"move_file"},{label:function(){return"Download file"},onClick:function(){var e=(0,D.jN)(A);le(encodeURIComponent(e))},uuid:"download_file"}]),Ie?p.push({label:function(){return"Delete file"},onClick:function(){Ie.type===a.tf.CHART?window.confirm("Are you sure you want to delete widget ".concat(Ie.uuid,"?"))&&o(Ie):window.confirm("Are you sure you want to delete block ".concat(Ie.uuid,"?"))&&fe({block:Ie,file:A})},uuid:"delete_block_file"}):p.push({label:function(){return"Delete file"},onClick:function(){var e=(0,D.jN)(A);window.confirm("Are you sure you want to delete file ".concat(e,"?"))&&ce(encodeURIComponent(e))},uuid:"delete_file"}));var h=f+k.iI/2,m=36*p.length;return f+m>=window.innerHeight&&(h=f-m),(0,je.createPortal)((0,_.jsx)("div",{style:{left:v,position:"fixed",top:h,zIndex:be.bf+100},children:(0,_.jsx)(s.Z,{items:p,open:!0,parentRef:void 0,uuid:"FileBrowser/ContextMenu",width:Ee})}),document.body)}),[P,fe,ce,ae,o,le,ne,te,oe,n,Ne,Ue,ze,Ie,A,V]);return(0,_.jsxs)(w.Nk,{ref:n,children:[Le,(Ie||A||V)&&$e,Se&&(0,_.jsx)("div",{style:{left:(null===P||void 0===P?void 0:P.x)-k.iI,position:"fixed",top:(null===P||void 0===P?void 0:P.y)-k.iI,zIndex:be.bf+100},children:(0,_.jsx)(m.ZP,{cursor:"grabbing",monospace:!0,children:null===Se||void 0===Se?void 0:Se.uuid})})]})}!function(e){e.BLOCK_FILE="block_file",e.DISABLED="disabled",e.FILE="file",e.FOLDER="folder",e.PIPELINE="pipeline"}(Ze||(Ze={}));var Fe=u.forwardRef(De)},53005:function(e,n,t){t.d(n,{IO:function(){return m},V3:function(){return h},a9:function(){return c},eV:function(){return d},jN:function(){return a},lr:function(){return p},mD:function(){return s},o$:function(){return v},u$:function(){return b},y:function(){return f}});var o=t(17717),r=t(44425),i=t(89706),l=t(81728),u=t(80330);function c(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=n||(t?null:null===e||void 0===e?void 0:e.name);if(null!==e&&void 0!==e&&e.parent){var i=[e.parent.name];return(null===r||void 0===r?void 0:r.length)>=1&&i.push(r),c(e.parent,i.join(o.sep))}return r}function d(e){return null===e||void 0===e?void 0:e.split(o.sep).slice(1).join(o.sep)}function a(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=c(e,n,t);return d(o)}function s(e){var n=e.match(i.d2);return(null===n||void 0===n?void 0:n.length)>=1?n[0].replace(".",""):null}function f(e){var n=["\\.".concat(i.Lu.PY),"\\.".concat(i.Lu.R),"\\.".concat(i.Lu.SQL),"\\.".concat(i.Lu.YAML),"\\.".concat(i.Lu.YML)].join("|"),t=new RegExp("".concat(n,"$")),o=e.match(t);return(null===o||void 0===o?void 0:o.length)>=1?o[0].replace(".",""):null}function v(e,n){var t=f(e);return!["__init__.py"].includes(e)&&(r.tf.DBT!==n||![i.Lu.YAML,i.Lu.YML].includes(t))}function p(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=c(e,n).split(o.sep);if(!l)return null;var d=(0,u.ck)(l);if(!l)return null;var a="";a=l.length>=3?l.slice(2,l.length).join(o.sep):l[l.length-1];var s=t?r.Q3:r.$W;if(s.concat(r.tf.DBT).includes(d)&&f(a)){var v=a.lastIndexOf("."),p=a.slice(v+1);return{language:i.nB[p],type:d,uuid:a.slice(0,v)}}}function h(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=c(e,n).split(o.sep);if(t[1]){var u=(0,l.C5)(t[n?0:1]);t[1]===r.tf.DBT&&(u=r.tf.DBT);var d=t[t.length-1],a=new RegExp(".".concat(i.Lu.YAML,"$")),s=new RegExp(".".concat(i.Lu.R,"$")),f=new RegExp(".".concat(i.Lu.SQL,"$")),v=new RegExp(".".concat(i.Lu.MD,"$"));if(d.match(a)&&r.VZ.includes(u))return{type:u,uuid:d.replace(a,"")};if(d.match(s)&&r.J8.includes(u))return{type:u,uuid:d.replace(s,"")};if(d.match(f)&&r.HX.includes(u)){var p=d.replace(/[.]/g,"_"),h=u===r.tf.DBT?t.slice(2,-1).join("_").concat("_".concat(p)):d.replace(f,"");return{type:u,uuid:h}}return d.match(v)&&u===r.tf.MARKDOWN?{type:u,uuid:d.replace(v,"")}:void 0}}function m(e,n){var t=e.split("."),r=t[t.length-1];i.n6.includes(r)&&t.pop();var l=t.join("").split(o.sep),u=l.slice(1,l.length).join("");return n.find((function(e){return e.uuid===u}))}function b(e){var n=e||{},t=n.language,o=n.name,u=n.type;if(o&&t&&u){var c=u===r.tf.CUSTOM?u:"".concat(u,"s"),d=i.JD[t],a=(0,l.kE)(o);return"".concat(c,"/").concat(a,".").concat(d)}}},80330:function(e,n,t){t.d(n,{TU:function(){return p},lU:function(){return v},ck:function(){return f}});var o=t(21831),r=t(17717),i=t(44425),l=t(57653),u=t(89706),c=t(86735);function d(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=n||(t?null:null===e||void 0===e?void 0:e.name);if(null!==e&&void 0!==e&&e.parent){var i=[e.parent.name];return(null===o||void 0===o?void 0:o.length)>=1&&i.push(o),d(e.parent,i.join(r.sep))}return null!==e&&void 0!==e&&e.path?null===e||void 0===e?void 0:e.path:o}var a=t(81728),s=t(42122),f=function(e){var n;if(null===e||void 0===e||e.forEach((function(e){if((null===e||void 0===e?void 0:e.length)>=1){var t=null===e||void 0===e?void 0:e.toLowerCase();(t in i.qC||(t=(0,a.C5)(t))in i.GJ)&&(n=t)}})),!n){var t=["\\.".concat(u.Lu.SQL),"\\.".concat(u.Lu.YAML),"\\.".concat(u.Lu.YML)].join("|"),o=new RegExp("".concat(t,"$"));if(e.join(r.sep).match(o))return i.tf.DBT}return n};function v(){return new RegExp(Object.keys(u.nB).map((function(e){return".(".concat(e,")$")})).join("|"))}function p(e,n,t){var p,h,m=null===e||void 0===e||null===(p=e.path.match(v())[0])||void 0===p?void 0:p.split(".")[1],b=t.type===l.qL.INTEGRATION,g=(0,c.sE)(null===t||void 0===t?void 0:t.blocks,(function(e){var n=e.type;return i.tf.DATA_EXPORTER===n})),j=e.path.replace(n,"").split(r.sep),C=f(e.path.split(r.sep)),y=i.tf.DBT===C,w=(h=j)[0]===i.tf.DBT?h.slice(1).join(r.sep):function(e){return e.at(-1)}(h).split(".")[0];if(j.length>=3&&!y){var k=j.slice(1,j.length-1).join(r.sep);w="".concat(k,"/").concat(w)}var x=u.nB[m],Z={configuration:(0,s.hB)({file_path:y&&i.t6.SQL===x?w:null,file_source:{path:d(e)}}),language:x,name:(0,a.wE)(w),type:C};if(C===i.tf.CUSTOM&&(Z.color=i.Lq.TEAL),b){var E=(0,c.sE)(t.blocks,(function(e){var n=e.type;return i.tf.DATA_LOADER===n})),D=(0,c.sE)(t.blocks,(function(e){var n=e.type;return i.tf.TRANSFORMER===n})),F=[];D?F.push(D.uuid):null!==g&&void 0!==g&&g.upstream_blocks?F.push.apply(F,(0,o.Z)(g.upstream_blocks)):E&&F.push(E.uuid),Z.upstream_blocks=F}return Z}},44952:function(e,n,t){t.d(n,{K:function(){return r}});var o=t(4383);function r(e){var n=(0,o.ZP)("downloads",e),t=document.createElement("a");t.href=n,document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(n),document.body.removeChild(t)}},19698:function(e,n,t){var o=t(82684),r=t(35686);n.Z=function(){var e=r.ZP.statuses.list().data;return{status:(0,o.useMemo)((function(){var n;return null===e||void 0===e||null===(n=e.statuses)||void 0===n?void 0:n[0]}),[e])}}}}]);