//>>built
define("dstore/Csv",["dojo/_base/lang","dojo/_base/declare"],function(p,t){function u(c,f){var g={},b=c.length,a;for(a=0;a<b;a++)g[c[a]]=f[a];return g}var v=/^\s*"([\S\s]*)"\s*$/,w=/""/g,x=/"/g;return t(null,{fieldNames:null,delimiter:",",newline:"\r\n",trim:!1,parse:function(c){var f=[];c=c.split(this.newline);var g=this.fieldNames,b=0,a=[],h="",k="",l;var e=0;var d=c.length;a:for(;e<d;e++)if(p.trim(c[e])){var m=c[e].split(this.delimiter);var n=0;for(l=m.length;n<l;n++){var q=m[n];var r=-1;h+=k+
q;for(k="";0<=(r=q.indexOf('"',r+1));)b++;if(0===b%2){if(0<b)if(b=v.exec(h))a.push(b[1].replace(w,'"'));else{a=[];h="";b=0;continue a}else a.push(this.trim||!g?p.trim(h):h);h="";b=0}else k=this.delimiter}0===b?(g?f.push(u(g,a)):g=this.fieldNames=a,a=[]):k=this.newline}return f},toCsv:function(c){return this.stringify(this.data,c)},stringify:function(c,f){f=f||{};var g=f.alwaysQuote,b=this.fieldNames,a=this.delimiter,h=this.newline,k="",l,e;for(l=-1;l<c.length;l++)for(-1<l&&(k+=h),e=0;e<b.length;e++){var d=
0>l?b[e]:c[l][b[e]];if(null===d||void 0===d)d="";"string"!==typeof d&&(d=d.toString());var m=g||0<=d.indexOf('"')||0<=d.indexOf(a);k+=(0<e?a:"")+(m?'"'+d.replace(x,'""')+'"':d)}f.trailingNewline&&(k+=h);return k}})});
//# sourceMappingURL=Csv.js.map