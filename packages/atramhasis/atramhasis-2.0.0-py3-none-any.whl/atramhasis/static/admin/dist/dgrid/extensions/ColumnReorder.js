//>>built
define("dgrid/extensions/ColumnReorder","dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/dom-class dojo/on dojo/query dojo/dnd/Source".split(" "),function(h,d,g,m,n,u,p){function q(b,a){var c=a[2],e=b[c?"columnSets":"subRows"][a[1]];return c?e[a[2]]:e}function k(b,a,c){a[2]?b.columnSets[a[1]][a[2]]=c:b.subRows[a[1]]=c}function r(b,a){return a.slice(("dgrid-"+b+"-").length)}var t=/(\d+)(?:-(\d+))?$/;h=d(p,{copyState:function(){return!1},checkAcceptance:function(b){return b===this},_legalMouseDown:function(b){return-1<
b.target.className.indexOf("dgrid-resize-handle")?!1:this.inherited(arguments)},onDropInternal:function(b){var a=this.grid,c=t.exec(r(a.id,b[0].getAttribute("dndType"))),e=c[2]?"columnSets":"subRows",f=q(a,c),l=a.columns;this.inherited(arguments);c&&setTimeout(function(){var d=g.map(b[0].parentNode.childNodes,function(a){return l[a.columnId]});k(a,c,d);d={grid:a,subRow:d,column:l[b[0].columnId],bubbles:!0,cancelable:!0,parentType:"dnd"};d[e]=a[e];n.emit(a.domNode,"dgrid-columnreorder",d)?a.set(e,
a[e]):(k(a,c,f),a.renderHeader(),a.sort.length&&a.updateSortArrow(a.sort))},0)}});d=d(null,{columnDndConstructor:h,_initSubRowDnd:function(b,a){var c;var e=0;for(c=b.length;e<c;e++){var f=b[e];if(!1!==f.reorderable&&(f=f.headerNode,m.add(f,"dojoDndItem"),f.setAttribute("dndType",a),!d))var d=f.parentNode}d&&this._columnDndSources.push(new this.columnDndConstructor(d,{horizontal:!0,grid:this}))},renderHeader:function(){var b="dgrid-"+this.id+"-",a;this.inherited(arguments);this._columnDndSources=[];
if(this.columnSets){var c=0;for(a=this.columnSets.length;c<a;c++)g.forEach(this.columnSets[c],function(a,d){this._initSubRowDnd(a,b+c+"-"+d)},this)}else g.forEach(this.subRows,function(a,c){this._initSubRowDnd(a,b+c)},this)},_destroyColumns:function(){this._columnDndSources&&g.forEach(this._columnDndSources,function(b){b.destroy()});this.inherited(arguments)}});d.ColumnDndSource=h;return d});
//# sourceMappingURL=ColumnReorder.js.map