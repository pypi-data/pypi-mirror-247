[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[tool.hatch.build]
dev-mode-dirs = ["."]

[project]
name = "clifs"
description = "Command line interface for basic file system operations."
readme = "README.md"
authors = [{ email = "don.felice@gmx.net", name = "Felix Segerer" }]
license-files = { paths = ["LICENSE"] }
classifiers = ["Programming Language :: Python :: 3"]
keywords = ["file system", "command line"]
dependencies = ["colorama>=0.4.3", "rich>=13.7.0"]
dynamic = ["version"]
requires-python = ">=3.8"

[project.urls]
"Source code" = "https://github.com/Don-Felice/clifs"

[tool.hatch.version]
path = "clifs/VERSION"
pattern = "^(?P<version>.*)$"

[project.scripts]
clifs = "clifs.__main__:main"

[project.entry-points."clifs.plugins"]
tree = "clifs.plugins.tree:DirectoryTree"
du = "clifs.plugins.disc_usage:DiscUsageExplorer"
cp = "clifs.plugins.como:FileCopier"
mv = "clifs.plugins.como:FileMover"
del = "clifs.plugins.delete:FileDeleter"
ren = "clifs.plugins.rename:Renamer"
backup = "clifs.plugins.backup:FileSaver"

[tool.hatch.envs.default]
dependencies = [
    "black",
    "isort",
    "pytest",
    "pytest-cov",
    "mypy",
    "pyproject-flake8",
    "flake8",
    "pylint",
    "clifs @ file://{root}",
]
[tool.hatch.envs.default.scripts]
test = """pytest -v --cov-report=term-missing \
 --cov-config=pyproject.toml --cov=clifs {args}"""
lint = [
    "pflake8 .",
    "black --check .",
    "isort --check .",
    "pylint clifs",
    "mypy clifs --strict",
]

[tool.isort]
profile = "black"

[tool.pytest.ini_options]
minversion = "7.0"
addopts = "--cov --cov-report term-missing"

[tool.coverage.run]
branch = true
parallel = true
source = ['clifs']

[tool.coverage.report]
exclude_lines = ["no cov", "if __name__ == .__main__.:", "if TYPE_CHECKING:"]

[tool.flake8]
max-line-length = 88
count = true

[tool.pylint.'MESSAGES CONTROL']
disable = "missing-function-docstring"
