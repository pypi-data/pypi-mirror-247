(self.webpackChunkriskflow_widgets=self.webpackChunkriskflow_widgets||[]).push([[59],{1568:(e,t,i)=>{e.exports=i(316),e.exports.version=i(4147).version},316:(e,t,i)=>{"use strict";i.r(t),i.d(t,{FLOT_WIDGET_VERSION:()=>b,FlotModel:()=>f,FlotView:()=>x,TABLE_WIDGET_VERSION:()=>g,TREE_WIDGET_VERSION:()=>A,TableModel:()=>c,TableView:()=>h,TreeModel:()=>d,TreeView:()=>n});var s=i(1395),a=i(5431);i(9592),i(8236);class n extends s.DOMWidgetView{initialize(e){super.initialize(e),this.loaded=!1}generateActionMethod(e,t,i,s){return function(a){t=e.create_node(t,{type:i,data:s}),e.edit(t,s+".")}}generateContextMethod(e,t,i){var s={};for(var a in i)i.hasOwnProperty(a)&&(s[a]={separator_before:!1,separator_after:!1,label:a,action:this.generateActionMethod(e,t,i[a],a)});return s}perform_update(e,t,i){var s=JSON.parse(this.model.get("settings")),a=this.model.get("plugins"),n=this;this.multiselect=a.includes("checkbox"),e.jstree({core:{data:t,check_callback:!0},types:i,plugins:a,themes:{icons:!0},contextmenu:a.includes("contextmenu")?{items:function(t){var i=e.jstree(!0),a={};for(const e in s.contextmenu)s.contextmenu.hasOwnProperty(e)&&(a[e]={separator_before:!1,separator_after:!1,label:e,action:!1,submenu:n.generateContextMethod(i,t,s.contextmenu[e])});var A,d={Toggle:{separator_before:!0,label:"Toggle Status",action:function(){i.get_selected(!0).map((function(e){e.data.ignore=!!e.data.hasOwnProperty("ignore")&&e.data.ignore,e.data.ignore=!e.data.ignore;var t=i.get_node(e,!0).children(".jstree-anchor");e.data.ignore?t.addClass("jstree-disabled").attr("aria-disabled",!0):t.removeClass("jstree-disabled").attr("aria-disabled",!1)})),i.trigger("enable_node",{node:t})}}},l={Delete:{separator_before:!0,label:"Delete Node",action:function(e){i.delete_node(t)}}};switch(t.type){case"root":A=a;break;case"group":A=s.events.includes("ignore")?$.extend({},a,d,l):$.extend({},a,l);break;default:A=s.events.includes("ignore")?$.extend({},d,l):l}return A}}:null}).on("select_node.jstree",this.handle_select.bind(this)),s.events.includes("create")&&e.on("rename_node.jstree",this.handle_tree_change.bind(this)),s.events.includes("delete")&&e.on("delete.jstree",this.handle_delete.bind(this)),s.events.includes("ignore")&&(e.on("enable_node.jstree",this.handle_toggle.bind(this)),e.on("open_node.jstree",this.handle_open.bind(this))),this.multiselect&&e.on("deselect_node.jstree",this.handle_deselect.bind(this))}update(){if(!this.loaded&&this.model.get("value")){var e=this.$tree,t=JSON.parse(this.model.get("value")),i=JSON.parse(this.model.get("type_data"));this.perform_update(e,t,i),this.$search.on("keyup",this.handle_search.bind(this)).on("paste",this.handle_search.bind(this)),this.loaded=!0}return super.update()}render(){this.$search=$('<input type="text" />').addClass("input").addClass("widget-text").appendTo(this.el),this.$tree=$("<div />").appendTo(this.el),this.to=!1,this.displayed.then(a.bind(this.update,this))}get_json_path(e){return this.$tree.jstree("get_path",e.node).slice(1)}handle_search(e,t){var i=this;this.to&&clearTimeout(this.to),this.to=setTimeout((function(){var e=i.$search.val();i.$tree.jstree(!0).search(e)}),250)}handle_select(e,t){if(null!=t){if(this.model.set("selected",this.get_json_path(t)),this.multiselect){var i=this.$tree.jstree("get_selected",!0).map((function(e){return e.text}));this.model.set("checked",i)}this.touch()}}handle_open(e,t){if(null!=t){var i=this;t.node.children.forEach((function(e){var t=i.$tree.jstree("get_node",e),s=$(i.$tree.jstree("get_node",e,!0)).children(".jstree-anchor");t.data.hasOwnProperty("ignore")&&t.data.ignore&&s.addClass("jstree-disabled").attr("aria-disabled",!0)}))}}handle_deselect(e,t){if(null!=t){var i=this.$tree.jstree("get_selected",!0).map((function(e){return e.text}));this.model.set("checked",i),this.touch()}}handle_toggle(e,t){if(null!=t){var i=this,s=this.$tree.jstree("get_selected",!0).map((function(e){var t=i.$tree.jstree("get_path",e);return t[0]=!!e.data.hasOwnProperty("ignore")&&e.data.ignore,t}));this.model.set("ignore",s),this.touch()}}handle_tree_change(e,t){null!=t&&(0!=t.node.text.indexOf(t.node.data)&&this.$tree.jstree("rename_node",t.node,t.node.data+"."+t.node.text),this.model.set("created",this.get_json_path(t)),this.touch())}handle_delete(e,t){null!=t&&(this.model.set("deleted",this.get_json_path(t)),this.touch())}}const A="0.2.1";class d extends s.DOMWidgetModel{defaults(){return{...super.defaults(),_model_name:"TreeModel",_view_name:"TreeView",_model_module:"riskflow_widgets",_view_module:"riskflow_widgets",_model_module_version:A,_view_module_version:A,value:"",type_data:"",selected:[],created:[],deleted:[],plugins:[],checked:[],ignore:[],settings:""}}}d.serializers={...s.WidgetModel.serializers,selected:{deserialize:s.unpack_models},created:{deserialize:s.unpack_models},deleted:{deserialize:s.unpack_models},plugins:{deserialize:s.unpack_models},checked:{deserialize:s.unpack_models},ignore:{deserialize:s.unpack_models}};var l=i(1395),o=i(5431),r=i(2876);class h extends l.DOMWidgetView{initialize(e){super.initialize(e),this.loaded=!1}update(){var e=this.model.get("value"),t=""===e?null:JSON.parse(e);if(this.loaded)this.hot.loadData(t);else{var i=this;this.hot=new r(i.$table[0],o.extend({data:t,afterChange:function(e,t){"loadData"!==t&&i.handle_table_change(e,this.getData())}},this.settings)),this.loaded=!0}return super.update()}render(){var e=this.model.get("description");""!=e&&(this.el.classList.add("widget-inline-hbox"),this.$label=$("<div />").addClass("widget-label").appendTo(this.el),this.$label.text(e)),this.$table=$("<div/>").appendTo(this.el),this.settings=JSON.parse(this.model.get("settings")),this.colHeaders="colHeaders"in this.settings?this.settings.colHeaders:[],this.label=e,this.displayed.then(o.bind(this.update,this))}handle_table_change(e,t){if(this.colHeaders.length&&t.length>1)t[0].length!=this.colHeaders.length&&"Model Configuration"!=this.model.get("description")||(this.model.set("value",JSON.stringify(t)),this.touch());else if(t.length>1){var i=t[0].slice(1,-1).map((e=>null!=e)),s=!0;t.slice(1,-1).forEach(((e,t)=>{s=null!=e[0]&s&e.slice(1).some((e=>e)),e.slice(1).forEach(((e,t)=>{i[t]=i[t]&null==e}))})),!i.some((e=>e))&&s&&(this.model.set("value",JSON.stringify(t.slice(0,-1).map((e=>e.slice(0,-1).map((e=>parseFloat(e))))))),this.touch())}}}const g="0.2.1";class c extends l.DOMWidgetModel{defaults(){return{...super.defaults(),_model_name:"TableModel",_view_name:"TableView",_model_module:"riskflow_widgets",_view_module:"riskflow_widgets",_model_module_version:g,_view_module_version:g,value:"",settings:"",description:""}}}var p=i(7865),u=i.n(p),m=i(1395),_=i(5431),w=i(2876);i(6191),i(9078),i(4642);class x extends m.DOMWidgetView{update(){var e=this.model.get("value");if(""!=e){var t=JSON.parse(e);this.renderGraph(t)}else console.log("update is null - why?");return super.update()}render(){this.el.classList.add("widget-inline-hbox"),""!=this.model.get("description")&&(this.$label=u()("<div />").addClass("widget-label").appendTo(this.el),this.$label.text(this.model.get("description"))),this.$flot=u()("<div/>").addClass("flotplot").appendTo(this.el),this.$table=u()("<div/>").addClass("handsonplot").appendTo(this.el),this.colheaders=[],this.displayed.then(_.bind(this.update,this))}renderGraph(e){var t=this,i=JSON.parse(this.model.get("flot_settings")),s=JSON.parse(this.model.get("hot_settings")),a=function(e,t){var i,s,a,n,A=[["Index"].concat(e.map((e=>e.label)))];if(e.length>1)for(var d=0;d<e[0].data.length;d++){var l=e[0].data[d].slice(0);t&&(l[0]=(void 0,void 0,void 0,s=(i=new Date(l[0])).getFullYear().toString(),a=(i.getMonth()+1).toString(),n=i.getDate().toString(),s+"-"+(a[1]?a:"0"+a[0])+"-"+(n[1]?n:"0"+n[0])));for(var o=1;o<e.length;o++)l.push(e[o].data[d][1]);A.push(l)}else A=A.concat(e[0].data);return A}(e,"time"==_.get(i,"xaxis.mode"));s=_.extend({manualColumnMove:!0,contextMenu:!1,minSpareRows:1,width:300,height:300},s),this.colheaders=a[0],s.colHeaders=this.colheaders,i=_.extend({legend:{show:!0,position:"ne"},series:{lines:{show:!0},points:{show:!0},shadowSize:0},grid:{hoverable:!0},zoom:{interactive:!0},pan:{interactive:!0}},i),"time"==_.get(i,"xaxis.mode")&&(i=_.extend({yaxis:{tickFormatter:function(e){return e.toString().replace(/\B(?=(?:\d{3})+(?!\d))/g,",")}}},i)),u().plot(t.$flot,e,i),this.hot=new w(t.$table[0],_.extend({data:a.slice(1),afterChange:function(e,i){"loadData"!==i&&t.handle_table_change(this.getData())}},s))}handle_table_change(e){var t=function(e,t){console.log("get");var i=[];if(t.countCols()>2)for(var s=t.getDataAtCol(0).slice(0,-1),a=e.slice(1),n=0;n<a.length;n++)i.push({label:a[n],data:_.zip(s,t.getDataAtCol(n+1).slice(0,-1))});else i=[{label:"Rate",data:t.getData().slice(0,-1)}];return i}(this.colheaders,this.hot);this.model.set("value",JSON.stringify(t)),this.touch()}}const b="0.2.1";class f extends m.DOMWidgetModel{defaults(){return{...super.defaults(),_model_name:"FlotModel",_view_name:"FlotView",_model_module:"riskflow_widgets",_view_module:"riskflow_widgets",_model_module_version:b,_view_module_version:b,value:"",hot_settings:"",flot_settings:"",description:""}}}i(4325),i(6751),i(8236)},6261:(e,t,i)=>{var s=i(1568),a=i(1395);e.exports={id:"riskflow_widgets:plugin",requires:[a.IJupyterWidgetRegistry],activate:function(e,t){t.registerWidget({name:"riskflow_widgets",version:s.version,exports:s})},autoStart:!0}},8236:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>_});var s=i(3534),a=i.n(s),n=i(619),A=i.n(n),d=i(628),l=i.n(d),o=i(4991),r=i.n(o),h=i(1211),g=i.n(h),c=i(1034),p=i.n(c),u=i(3434),m={};m.styleTagTransform=p(),m.setAttributes=r(),m.insert=l().bind(null,"head"),m.domAPI=A(),m.insertStyleElement=g(),a()(u.Z,m);const _=u.Z&&u.Z.locals?u.Z.locals:void 0},3434:(e,t,i)=>{"use strict";i.d(t,{Z:()=>g});var s=i(8081),a=i.n(s),n=i(3645),A=i.n(n),d=i(1667),l=i.n(d),o=new URL(i(831),i.b),r=A()(a()),h=l()(o);r.push([e.id,`.vakata-context {\n z-index:2999 !important;\n}\n.legendLayer .background {\n    fill: rgba(255, 255, 255, 0.85);\n    stroke: rgba(0, 0, 0, 0.85);\n    stroke-width: 1;\n}\n.legend {\n\t\tdisplay: block;\n\t\t-webkit-padding-start: 2px;\n\t\t-webkit-padding-end: 2px;\n\t\tborder-width: initial;\n\t\tborder-style: none;\n\t\tborder-color: initial;\n\t\tborder-image: initial;\n\t\tpadding-left: 10px;\n        padding-right: 10px;\n        padding-top: 10px;\n        padding-bottom: 10px;\n}\n.widget-box { overflow: visible }\n.widget-text { width: 500px !important; }\n.widget-label { align-self: baseline; min-width:35ex }\n.widget-inline-hbox { align-items: flex-end; }\n.widget-textarea  { width: auto; }\n.widget-tenor-text{ width:140px;margin:0 !important }\n.widget-datepicker { min-width: 140px }\n.widget-select { width: 450px !important; }\n.widget-tenorlistbox {width:140px; margin-bottom:0}\n.flotwrapper { position: relative; width: 800px; margin: auto; margin-top: 20px; font-size: 12pt; }\n.flottitle { color: #888; margin-left: 50px; }\n.flotgraph { position: relative; margin-top: 20px; }\n.flotplot { width: 400px; height: 300px; }\n.handsonplot { overflow: auto; height: 300px; max-width: 300px}\n.handsontable col.rowHeader {  width: 250px; }\n.container { width:95%; }\n.generictree { max-width : 450px; overflow: auto; max-height: 700px; padding : 5px; border-style:outset }\n.genericframe { padding : 5px; border-style:outset }\n.rightframe{ overflow: auto; max-height: 700px }\n.mainframe{ background-image:url(${h}); background-repeat:repeat }\n`,""]);const g=r},3384:e=>{"use strict";e.exports="data:image/gif;base64,R0lGODlhCwAHAIAAACgoKP///yH5BAEAAAEALAAAAAALAAcAAAINjI+AC7rWHIsPtmoxLAA7"},6740:e=>{"use strict";e.exports="data:image/gif;base64,R0lGODlhCwAHAIAAACgoKP///yH5BAEAAAEALAAAAAALAAcAAAIORI4JlrqN1oMSnmmZDQUAOw=="},468:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAkCAMAAAB/qqA+AAAABlBMVEUAAAAAAAClZ7nPAAAAAnRSTlMNAMM9s3UAAAAXSURBVHjajcEBAQAAAIKg/H/aCQZ70AUBjAATb6YPDgAAAABJRU5ErkJggg=="},4860:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAACAQMAAABv1h6PAAAABlBMVEUAAAAdHRvEkCwcAAAAAXRSTlMAQObYZgAAAAxJREFUCNdjAAMHBgAAiABBI4gz9AAAAABJRU5ErkJggg=="},4333:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAYAAAAsEj5rAAAAU0lEQVR42u3VOwoAMAgE0dwfAnNjU26bYkBCFGwfiL9VVWoO+BJ4Gf3gtsEKKoFBNTCoCAYVwaAiGNQGMUHMkjGbgjk2mIONuXo0nC8XnCf1JXgArVIZAQh5TKYAAAAASUVORK5CYII="},168:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAYAAAAsEj5rAAAAUklEQVR42u3VMQoAIBADQf8Pgj+OD9hG2CtONJB2ymQkKe0HbwAP0xucDiQWARITIDEBEnMgMQ8S8+AqBIl6kKgHiXqQqAeJepBo/z38J/U0uAHlaBkBl9I4GwAAAABJRU5ErkJggg=="},1276:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAoCAMAAADJ7yrpAAAAKlBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKE86IAAAADXRSTlMABBEmRGprlJW72e77tTkTKwAAAFJJREFUeAHtzjkSgCAQRNFmQYUZ7n9dKUvru0TmvPAn3br0QfgdZ5xx6x+rQn23GqTYnq1FDcnuzZIO2WmedVqIRVxgGKEyjNgYRjKGkZ1hFIZ3I70LyM0VtU8AAAAASUVORK5CYII="},3525:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAoCAMAAADJ7yrpAAAAKlBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKE86IAAAADXRSTlMABBEmRGprlJW72e77tTkTKwAAAFNJREFUeAHtzjkSgCAUBNHPgsoy97+ulGXRqJE5L+xkxoYt2UdsLb5bqFINz+aLuuLn5rIu2RkO3fZpWENimNgiw6iBYRTPMLJjGFxQZ1hxxb/xBI1qC8k39CdKAAAAAElFTkSuQmCC"},1993:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAACAQMAAAB49I5GAAAABlBMVEUAAAAdHRvEkCwcAAAAAXRSTlMAQObYZgAAAAxJREFUCNdjAAMOBgAAGAAJMwQHdQAAAABJRU5ErkJggg=="},9597:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAACAQMAAAAD0EyKAAAABlBMVEUAAAAdHRvEkCwcAAAAAXRSTlMAQObYZgAAAAxJREFUCNdjgIIGBgABCgCBvVLXcAAAAABJRU5ErkJggg=="},3870:e=>{"use strict";e.exports="data:image/svg+xml;utf8,<svg xmlns=%27http://www.w3.org/2000/svg%27><filter id=%27jstree-grayscale%27><feColorMatrix type=%27matrix%27 values=%270.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0%27/></filter></svg>#jstree-grayscale"},831:(e,t,i)=>{"use strict";e.exports=i.p+"7ca36402b36b300be16d.png"},4147:e=>{"use strict";e.exports={version:"0.2.1"}}}]);